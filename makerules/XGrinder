##
# generic configuration
#######################

TYPE		:= EXECUTABLE
CFLAGS		+= -include ./src/Obj/XDefs.h
CXXFLAGS	+= -include ./src/Obj/XDefs.h

ifdef PLAT_LINUX
LDFLAGS		+= -static
LIBS		+=
endif #PLAT_LINUX

ifdef PLAT_MINGW
LIBS		+= -lcomctl32 -luuid -lcomdlg32 -lole32 -lgdi32 -lz
LDFLAGS		+= -Wl,-subsystem,windows
DEFINES		+= -D_WIN32_IE=0x0501 -D_WIN32_WINNT=0x0501 -DMINGW_BUILD=1
WIN_RESOURCES	+= ./src/XPTools/XGrinder.rc
endif #PLAT_MINGW

ifdef PLAT_DARWIN
LDFLAGS		+= -framework Carbon
LIBS		:= ./libs/local/lib/libz.a
endif #PLAT_DARWIN


##
# sources
#########

ifdef PLAT_LINUX
SOURCES += ./src/UI/XGrinderApp.lin.cpp
else

ifdef PLAT_MINGW
SOURCES += ./src/Utils/PlatformUtils.win.cpp
SOURCES += ./src/UI/XWin.win.cpp
SOURCES += ./src/UI/XWin32DND.cpp
endif #PLAT_MINGW

ifdef PLAT_DARWIN
SOURCES += ./src/Utils/PlatformUtils.mac.cpp
SOURCES += ./src/UI/XWin.mac.cpp
endif #PLAT_DARWIN

SOURCES += ./src/Utils/EndianUtils.c
SOURCES += ./src/Utils/zip.c
SOURCES += ./src/Utils/AssertUtils.cpp
SOURCES += ./src/UI/XGrinderApp.cpp
SOURCES += ./src/Utils/XUtils.cpp
SOURCES += ./src/Utils/MemFileUtils.cpp
SOURCES += ./src/GUI/GUI_Unicode.cpp
SOURCES += ./src/Utils/unzip.c
SOURCES += ./src/XPTools/XGrinderShell.cpp

endif #PLAT_LINUX
